<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.0 (457591)"/><meta name="author" content="MOON"/><meta name="created" content="2019-02-04 06:49:46 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-02-04 06:55:01 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>96. Unique Binary Search Trees</title></head><body><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Medium,<br/>
DP, Tree.</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Given n, how many structurally unique BST's (binary search trees) that store values 1 ... n?</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Example:</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">Input: 3
Output: 5
Explanation:
Given n = 3, there are a total of 5 unique BST's:

   1         3     3      2      1
    \       /     /      / \      \
     3     2     1      1   3      2
    /     /       \                 \
   2     1         2                 3
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">解法</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">java</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">可以用dfs进行搜索。</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Solution</span> </span>{
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">numTrees</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> n)</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> dfs(<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>, n);
    }
    
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">dfs</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> start, <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> end)</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> (start &gt;= end) {
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>;
        }
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> count = <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>;
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span> (<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> i = start; i &lt;= end; i++) {
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> left = dfs(start, i - <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>);
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> right = dfs(i + <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>, end);
            count += left * right;
        }
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> count;
    }
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">java</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">用dp。<br/>
就跟斐波那契数列一样，我们把n = 0 时赋为1，因为空树也算一种二叉搜索树，那么n = 1时的情况可以看做是其左子树个数乘以右子树的个数，左右字数都是空树，所以1乘1还是1。那么n = 2时，由于1和2都可以为跟，分别算出来，再把它们加起来即可。n = 2的情况可由下面式子算出：<br/>
dp[2] =&nbsp;&nbsp;&nbsp;&nbsp;dp[0] * dp[1]　　　(1为根的情况)<br/>
　　　　+ dp[1] * dp[0]　　&nbsp;&nbsp;&nbsp;&nbsp;(2为根的情况)<br/>
同理可写出 n = 3 的计算方法：<br/>
dp[3] =&nbsp;&nbsp;&nbsp;&nbsp;dp[0] * dp[2]　　　(1为根的情况)<br/>
　　　　+ dp[1] * dp[1]　　&nbsp;&nbsp;&nbsp;&nbsp;(2为根的情况)<br/>&nbsp;&nbsp;　　　&nbsp;&nbsp;&nbsp;&nbsp;+ dp[2] * dp[0]　　&nbsp;&nbsp;&nbsp;&nbsp;(3为根的情况)
<br/>
由此可以得出卡塔兰数列的递推式为：<br/>
<img src="96.%20Unique%20Binary%20Search%20Trees.resources/436FF3B3-1F7B-4CDE-A445-56DF88CC179B.png" height="47" width="385"/><br/>
我们根据以上的分析，可以写出代码如下：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Solution</span> </span>{
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">numTrees</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> n)</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(n==<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>) <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>;
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span>[] dp = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span>[n+<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>];
        dp[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>]=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>;
        dp[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>]=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>;
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span>(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> i=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">2</span>; i&lt;=n; i++){
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span>(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> j=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>; j&lt;i; j++){
                dp[i] += dp[j]* dp[i-j-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>];
            }
        }
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> dp[n];
    }
}
</code></pre>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">Medium%2C%0ADP%2C%20Tree.%0A%0AGiven%20n%2C%20how%20many%20structurally%20unique%20BST's%20(binary%20search%20trees)%20that%20store%20values%201%20...%20n%3F%0A%0AExample%3A%0A%60%60%60%0AInput%3A%203%0AOutput%3A%205%0AExplanation%3A%0AGiven%20n%20%3D%203%2C%20there%20are%20a%20total%20of%205%20unique%20BST's%3A%0A%0A%20%20%201%20%20%20%20%20%20%20%20%203%20%20%20%20%203%20%20%20%20%20%202%20%20%20%20%20%201%0A%20%20%20%20%5C%20%20%20%20%20%20%20%2F%20%20%20%20%20%2F%20%20%20%20%20%20%2F%20%5C%20%20%20%20%20%20%5C%0A%20%20%20%20%203%20%20%20%20%202%20%20%20%20%201%20%20%20%20%20%201%20%20%203%20%20%20%20%20%202%0A%20%20%20%20%2F%20%20%20%20%20%2F%20%20%20%20%20%20%20%5C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%0A%20%20%202%20%20%20%20%201%20%20%20%20%20%20%20%20%202%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%203%0A%60%60%60%0A%0A%23%23%23%23%20%E8%A7%A3%E6%B3%95%0A%0Ajava%0A%0A%E5%8F%AF%E4%BB%A5%E7%94%A8dfs%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E3%80%82%0A%0A%60%60%60java%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20numTrees(int%20n)%20%7B%0A%20%20%20%20%20%20%20%20return%20dfs(1%2C%20n)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20private%20int%20dfs(int%20start%2C%20int%20end)%20%7B%0A%20%20%20%20%20%20%20%20if%20(start%20%3E%3D%20end)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20int%20count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%20start%3B%20i%20%3C%3D%20end%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20int%20left%20%3D%20dfs(start%2C%20i%20-%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20int%20right%20%3D%20dfs(i%20%2B%201%2C%20end)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20count%20%2B%3D%20left%20*%20right%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20count%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0Ajava%0A%0A%E7%94%A8dp%E3%80%82%0A%E5%B0%B1%E8%B7%9F%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97%E4%B8%80%E6%A0%B7%EF%BC%8C%E6%88%91%E4%BB%AC%E6%8A%8An%20%3D%200%20%E6%97%B6%E8%B5%8B%E4%B8%BA1%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%A9%BA%E6%A0%91%E4%B9%9F%E7%AE%97%E4%B8%80%E7%A7%8D%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%EF%BC%8C%E9%82%A3%E4%B9%88n%20%3D%201%E6%97%B6%E7%9A%84%E6%83%85%E5%86%B5%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%81%9A%E6%98%AF%E5%85%B6%E5%B7%A6%E5%AD%90%E6%A0%91%E4%B8%AA%E6%95%B0%E4%B9%98%E4%BB%A5%E5%8F%B3%E5%AD%90%E6%A0%91%E7%9A%84%E4%B8%AA%E6%95%B0%EF%BC%8C%E5%B7%A6%E5%8F%B3%E5%AD%97%E6%95%B0%E9%83%BD%E6%98%AF%E7%A9%BA%E6%A0%91%EF%BC%8C%E6%89%80%E4%BB%A51%E4%B9%981%E8%BF%98%E6%98%AF1%E3%80%82%E9%82%A3%E4%B9%88n%20%3D%202%E6%97%B6%EF%BC%8C%E7%94%B1%E4%BA%8E1%E5%92%8C2%E9%83%BD%E5%8F%AF%E4%BB%A5%E4%B8%BA%E8%B7%9F%EF%BC%8C%E5%88%86%E5%88%AB%E7%AE%97%E5%87%BA%E6%9D%A5%EF%BC%8C%E5%86%8D%E6%8A%8A%E5%AE%83%E4%BB%AC%E5%8A%A0%E8%B5%B7%E6%9D%A5%E5%8D%B3%E5%8F%AF%E3%80%82n%20%3D%202%E7%9A%84%E6%83%85%E5%86%B5%E5%8F%AF%E7%94%B1%E4%B8%8B%E9%9D%A2%E5%BC%8F%E5%AD%90%E7%AE%97%E5%87%BA%EF%BC%9A%0Adp%5B2%5D%20%3D%C2%A0%C2%A0dp%5B0%5D%20*%20dp%5B1%5D%E3%80%80%E3%80%80%E3%80%80(1%E4%B8%BA%E6%A0%B9%E7%9A%84%E6%83%85%E5%86%B5)%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80%2B%20dp%5B1%5D%20*%20dp%5B0%5D%E3%80%80%E3%80%80%C2%A0%C2%A0(2%E4%B8%BA%E6%A0%B9%E7%9A%84%E6%83%85%E5%86%B5)%0A%E5%90%8C%E7%90%86%E5%8F%AF%E5%86%99%E5%87%BA%20n%20%3D%203%20%E7%9A%84%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%EF%BC%9A%0Adp%5B3%5D%20%3D%C2%A0%C2%A0dp%5B0%5D%20*%20dp%5B2%5D%E3%80%80%E3%80%80%E3%80%80(1%E4%B8%BA%E6%A0%B9%E7%9A%84%E6%83%85%E5%86%B5)%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80%2B%20dp%5B1%5D%20*%20dp%5B1%5D%E3%80%80%E3%80%80%C2%A0%C2%A0(2%E4%B8%BA%E6%A0%B9%E7%9A%84%E6%83%85%E5%86%B5)%0A%C2%A0%E3%80%80%E3%80%80%E3%80%80%C2%A0%C2%A0%2B%20dp%5B2%5D%20*%20dp%5B0%5D%E3%80%80%E3%80%80%C2%A0%C2%A0(3%E4%B8%BA%E6%A0%B9%E7%9A%84%E6%83%85%E5%86%B5)%0A%E7%94%B1%E6%AD%A4%E5%8F%AF%E4%BB%A5%E5%BE%97%E5%87%BA%E5%8D%A1%E5%A1%94%E5%85%B0%E6%95%B0%E5%88%97%E7%9A%84%E9%80%92%E6%8E%A8%E5%BC%8F%E4%B8%BA%EF%BC%9A%0A!%5B14386d0acaa89cc39912a3d4298e116a.png%5D(evernotecid%3A%2F%2FBF69E971-D524-44B7-91DB-A61998A9A576%2Fappyinxiangcom%2F18475009%2FENNote%2Fp101%3Fhash%3D14386d0acaa89cc39912a3d4298e116a)%0A%E6%88%91%E4%BB%AC%E6%A0%B9%E6%8D%AE%E4%BB%A5%E4%B8%8A%E7%9A%84%E5%88%86%E6%9E%90%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%86%99%E5%87%BA%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%0A%0A%60%60%60java%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20numTrees(int%20n)%20%7B%0A%20%20%20%20%20%20%20%20if(n%3D%3D1)%20return%201%3B%0A%20%20%20%20%20%20%20%20int%5B%5D%20dp%20%3D%20new%20int%5Bn%2B1%5D%3B%0A%20%20%20%20%20%20%20%20dp%5B0%5D%3D1%3B%0A%20%20%20%20%20%20%20%20dp%5B1%5D%3D1%3B%0A%20%20%20%20%20%20%20%20for(int%20i%3D2%3B%20i%3C%3Dn%3B%20i%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(int%20j%3D0%3B%20j%3Ci%3B%20j%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dp%5Bi%5D%20%2B%3D%20dp%5Bj%5D*%20dp%5Bi-j-1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20dp%5Bn%5D%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60</center></body></html>