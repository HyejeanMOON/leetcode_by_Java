<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.0 (457591)"/><meta name="altitude" content="38.95064926147461"/><meta name="author" content="MOON"/><meta name="created" content="2019-02-03 06:33:50 +0000"/><meta name="latitude" content="37.26403956189633"/><meta name="longitude" content="126.9964921360612"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-02-03 06:39:40 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>931. Minimum Falling Path Sum</title></head><body><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Medium,<br/>
Dynamic Programming.</strong></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Given a square array of integers A, we want the minimum sum of a falling path through A.</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">A falling path starts at any element in the first row, and chooses one element from each row.  The next row's choice must be in a column that is different from the previous row's column by at most one.</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Example 1:</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">Input: [[1,2,3],[4,5,6],[7,8,9]]
Output: 12
Explanation: 
The possible falling paths are:
[1,4,7], [1,4,8], [1,5,7], [1,5,8], [1,5,9]
[2,4,7], [2,4,8], [2,5,7], [2,5,8], [2,5,9], [2,6,8], [2,6,9]
[3,5,7], [3,5,8], [3,5,9], [3,6,8], [3,6,9]
The falling path with the smallest sum is [1,4,7], so the answer is 12.
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Note:</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">1 &lt;= A.length == A[0].length &lt;= 100
-100 &lt;= A[i][j] &lt;= 100
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">解法</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">初始化跟A[][]一样的数组dp[][],当i=0时跟A是一模一样的。<br/>
第二行开始，会根据列的不同有三种情况，<br/>
第一种是j=0时，只能选去j=j和j=j+1<br/>
第二种是j=lenCol, 只能选j=j-1,j=j<br/>
第三种是其他情况， j=j, j=j-1, j=j+1</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">follow up,<br/>
减少空间复杂度的一种解法是，不设置完整的dp，可以设置奇偶数组轮流遍历。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">java</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Solution</span> </span>{
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">minFallingPathSum</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span>[][] A)</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> lenRow = A.length;
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> lenCol = A[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>].length;
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> dp[][] = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span>[lenRow][lenCol];
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span>(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> j=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>; j&lt;lenCol; j++){
            dp[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>][j] = A[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>][j];
        }
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span>(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> i=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>; i&lt;lenRow; i++){
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span>(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> j=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>; j&lt;lenCol; j++){
                <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(j==<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>){
                    dp[i][j]=Math.min(dp[i-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>][j]+A[i][j],dp[i-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>][j+<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>]+A[i][j]);
                }<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">else</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(j==(lenCol-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>)){
                    dp[i][j]=Math.min(dp[i-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>][j]+A[i][j],dp[i-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>][j-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>]+A[i][j]);
                }<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">else</span>{
                    dp[i][j]=Math.min(dp[i-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>][j]+A[i][j],Math.min(dp[i-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>][j-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>]+A[i][j],dp[i-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>][j+<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>]+A[i][j]));
                }
            }
        }
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> res = Integer.MAX_VALUE;
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span>(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> j=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>; j&lt;lenCol; j++){
            res = Math.min(dp[lenRow-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>][j],res);
        }
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> res;
    }
}
</code></pre>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">**Medium%2C%0ADynamic%20Programming.**%0A%0AGiven%20a%20square%20array%20of%20integers%20A%2C%20we%20want%20the%20minimum%20sum%20of%20a%20falling%20path%20through%20A.%0A%0AA%20falling%20path%20starts%20at%20any%20element%20in%20the%20first%20row%2C%20and%20chooses%20one%20element%20from%20each%20row.%20%20The%20next%20row's%20choice%20must%20be%20in%20a%20column%20that%20is%20different%20from%20the%20previous%20row's%20column%20by%20at%20most%20one.%0A%0AExample%201%3A%0A%60%60%60%0AInput%3A%20%5B%5B1%2C2%2C3%5D%2C%5B4%2C5%2C6%5D%2C%5B7%2C8%2C9%5D%5D%0AOutput%3A%2012%0AExplanation%3A%20%0AThe%20possible%20falling%20paths%20are%3A%0A%5B1%2C4%2C7%5D%2C%20%5B1%2C4%2C8%5D%2C%20%5B1%2C5%2C7%5D%2C%20%5B1%2C5%2C8%5D%2C%20%5B1%2C5%2C9%5D%0A%5B2%2C4%2C7%5D%2C%20%5B2%2C4%2C8%5D%2C%20%5B2%2C5%2C7%5D%2C%20%5B2%2C5%2C8%5D%2C%20%5B2%2C5%2C9%5D%2C%20%5B2%2C6%2C8%5D%2C%20%5B2%2C6%2C9%5D%0A%5B3%2C5%2C7%5D%2C%20%5B3%2C5%2C8%5D%2C%20%5B3%2C5%2C9%5D%2C%20%5B3%2C6%2C8%5D%2C%20%5B3%2C6%2C9%5D%0AThe%20falling%20path%20with%20the%20smallest%20sum%20is%20%5B1%2C4%2C7%5D%2C%20so%20the%20answer%20is%2012.%0A%60%60%60%0A%20%0A%0ANote%3A%0A%60%60%60%0A1%20%3C%3D%20A.length%20%3D%3D%20A%5B0%5D.length%20%3C%3D%20100%0A-100%20%3C%3D%20A%5Bi%5D%5Bj%5D%20%3C%3D%20100%0A%60%60%60%0A%0A%23%23%23%23%20%E8%A7%A3%E6%B3%95%0A%E5%88%9D%E5%A7%8B%E5%8C%96%E8%B7%9FA%5B%5D%5B%5D%E4%B8%80%E6%A0%B7%E7%9A%84%E6%95%B0%E7%BB%84dp%5B%5D%5B%5D%2C%E5%BD%93i%3D0%E6%97%B6%E8%B7%9FA%E6%98%AF%E4%B8%80%E6%A8%A1%E4%B8%80%E6%A0%B7%E7%9A%84%E3%80%82%0A%E7%AC%AC%E4%BA%8C%E8%A1%8C%E5%BC%80%E5%A7%8B%EF%BC%8C%E4%BC%9A%E6%A0%B9%E6%8D%AE%E5%88%97%E7%9A%84%E4%B8%8D%E5%90%8C%E6%9C%89%E4%B8%89%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%0A%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%98%AFj%3D0%E6%97%B6%EF%BC%8C%E5%8F%AA%E8%83%BD%E9%80%89%E5%8E%BBj%3Dj%E5%92%8Cj%3Dj%2B1%0A%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%98%AFj%3DlenCol%2C%20%E5%8F%AA%E8%83%BD%E9%80%89j%3Dj-1%2Cj%3Dj%0A%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%98%AF%E5%85%B6%E4%BB%96%E6%83%85%E5%86%B5%EF%BC%8C%20j%3Dj%2C%20j%3Dj-1%2C%20j%3Dj%2B1%0A%0Afollow%20up%2C%0A%E5%87%8F%E5%B0%91%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E7%9A%84%E4%B8%80%E7%A7%8D%E8%A7%A3%E6%B3%95%E6%98%AF%EF%BC%8C%E4%B8%8D%E8%AE%BE%E7%BD%AE%E5%AE%8C%E6%95%B4%E7%9A%84dp%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%AE%BE%E7%BD%AE%E5%A5%87%E5%81%B6%E6%95%B0%E7%BB%84%E8%BD%AE%E6%B5%81%E9%81%8D%E5%8E%86%E3%80%82%0A%0Ajava%0A%60%60%60java%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20minFallingPathSum(int%5B%5D%5B%5D%20A)%20%7B%0A%20%20%20%20%20%20%20%20int%20lenRow%20%3D%20A.length%3B%0A%20%20%20%20%20%20%20%20int%20lenCol%20%3D%20A%5B0%5D.length%3B%0A%20%20%20%20%20%20%20%20int%20dp%5B%5D%5B%5D%20%3D%20new%20int%5BlenRow%5D%5BlenCol%5D%3B%0A%20%20%20%20%20%20%20%20for(int%20j%3D0%3B%20j%3ClenCol%3B%20j%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20dp%5B0%5D%5Bj%5D%20%3D%20A%5B0%5D%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for(int%20i%3D1%3B%20i%3ClenRow%3B%20i%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(int%20j%3D0%3B%20j%3ClenCol%3B%20j%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(j%3D%3D0)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dp%5Bi%5D%5Bj%5D%3DMath.min(dp%5Bi-1%5D%5Bj%5D%2BA%5Bi%5D%5Bj%5D%2Cdp%5Bi-1%5D%5Bj%2B1%5D%2BA%5Bi%5D%5Bj%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Delse%20if(j%3D%3D(lenCol-1))%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dp%5Bi%5D%5Bj%5D%3DMath.min(dp%5Bi-1%5D%5Bj%5D%2BA%5Bi%5D%5Bj%5D%2Cdp%5Bi-1%5D%5Bj-1%5D%2BA%5Bi%5D%5Bj%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Delse%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dp%5Bi%5D%5Bj%5D%3DMath.min(dp%5Bi-1%5D%5Bj%5D%2BA%5Bi%5D%5Bj%5D%2CMath.min(dp%5Bi-1%5D%5Bj-1%5D%2BA%5Bi%5D%5Bj%5D%2Cdp%5Bi-1%5D%5Bj%2B1%5D%2BA%5Bi%5D%5Bj%5D))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20int%20res%20%3D%20Integer.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20for(int%20j%3D0%3B%20j%3ClenCol%3B%20j%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20res%20%3D%20Math.min(dp%5BlenRow-1%5D%5Bj%5D%2Cres)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20res%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A</center></body></html>